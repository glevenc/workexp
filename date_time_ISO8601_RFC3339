lab:ssh root@135.111.103.132
ssh 172.24.16.104
lab:ssh root@135.111.103.132ssh 172.24.16.104docker exec -it 943589f2581d  bashcd /utas/opt/apache-tomcat-8.0.18/confcd /utas/configBINARY DIR:cd ${ROOT}/obj/linux_x86/sde/utas/configcd ${ROOT}/obj/linux_x86/csp/utas/configDEV DIR:/fs/lssbld/R3409.00/csp/asprov/config/log4clus.properties.m4 /fs/lssbld/R3409.00/sde/com_mediator/log4j.properties.utasTMP   /home/glevenc/rel34/sde/com_mediatorhttp://135.2.198.7:8080/SPFE/provisioning.jsp http://135.2.198.8:8080/SPFE/provisioning.jsplogin/pass: local_mediator/local_mediator./run_supervisord /etc/opt/LCP/supervisord/SPFEsupervisord.conf log4j questions RFC 3339, ISO 8601When updating the FRSRFC2822 http://baike.baidu.com/link?url=Hckdfb7v8hdl8RHLDJPJzPx4T0Xm9oG9AKdYOMrVh4xlM648NOkO1CqqaTrYkCrNsdUaMWQ-Tn7Lvs43MRCTZ9rUXPlza3alSK_m4KyXYJWhttp://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.htmlFRS:https://confluence.int.net.nokia.com/display/VTAS/FRS+-+OAM+-+Logging+Requirements#FRS-OAM-LoggingRequirements-FN2078.FC014582.01CommonJSONschemaforcontaineroutputlog4cplus.properties :before changing:{ "type": "LOG", "level": "WARN", "time": "10-08-16|05:20:18:742", "log": "[4142283584][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:453]:RpMonitor::shutdownGsoap()  done with wait"}{ "type": "LOG", "level": "WARN", "time": "10-08-16|05:20:18:742", "log": "[4142283584][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:461]:RpMonitor::shutdownGsoap() terminated"}{ "type": "LOG", "level": "WARN", "time": "10-08-16|05:20:18:742", "log": "[4142388992][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:453]:RpMonitor::shutdownGsoap()  done with wait"}{ "type": "LOG", "level": "WARN", "time": "10-08-16|05:20:18:833", "log": "[4142388992][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:461]:RpMonitor::shutdownGsoap() terminated"}^C{  "type":"log",  "level":"critical",  "time":"2016-10-08T05:20:19.648Z",  "process":"rpgwmon 269",  "service":"spfe",  "container":"943589f2581d",  "host":"BL-Node-1",  "cnum":"0",  "msgclass":"trace",  "log":"REQ_SEQ=49 SEND_SEQ=22  file=CREDcommon.cpp line=238 message=CRED handle_signals received SIGINT ",}changed:log4cplus.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{%Y-%m-%dT%H:%M:%S.%q%z}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"WARN","time":"2016-10-08T05:23:56.538+0000","log":"[4073700160][root.csp/rpgw/rpgwmon/UtGsoap.cpp:971]:UtGsoap::run() did cancel on UtHlrSyncAdd2Q thread"}{"type":"log","level":"WARN","time":"2016-10-08T05:23:56.539+0000","log":"[4073700160][root.csp/rpgw/rpgwmon/UtGsoap.cpp:975]:UtGsoap::run() done with UtHlrSyncAdd2Q thread wait"}log4cplus.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{%Y-%m-%dT%H:%M:%S.%qZ}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"WARN","time":"2016-10-08T05:26:13.019Z","log":"[4142160704][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:449]:RpMonitor::shutdownGsoap() did cancel on UtGsoap"}{"type":"log","level":"WARN","time":"2016-10-08T05:26:13.019Z","log":"[4142160704][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:453]:RpMonitor::shutdownGsoap()  done with wait"}{"type":"log","level":"WARN","time":"2016-10-08T05:26:13.019Z","log":"[4142160704][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:461]:RpMonitor::shutdownGsoap() terminated"}{"type":"log","level":"WARN","time":"2016-10-08T05:26:13.027Z","log":"[4014988096][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:453]:RpMonitor::shutdownGsoap()  done with wait"}{"type":"log","level":"WARN","time":"2016-10-08T05:26:13.027Z","log":"[4014988096][root.csp/rpgw/rpgwmon/RpMonitorImpl.cpp:461]:RpMonitor::shutdownGsoap() terminated"}before changed:log4j.appender.STDOUT.layout.ConversionPattern={%n      "type"  :       "LOG",%n        "level" :       "%p",%n "time"  :       "%d{MMM-dd-yyyy|HH:mm:ss,SSS zzzz}",%n  "log"   :       "[%t][%c{2}.%l]: %m"%n}%nDate and Time Pattern Result "yyyy.MM.dd G 'at' HH:mm:ss z"  2001.07.04 AD at 12:08:56 PDT  "EEE, MMM d, ''yy"  Wed, Jul 4, '01  "h:mm a"  12:08 PM  "hh 'o''clock' a, zzzz"  12 o'clock PM, Pacific Daylight Time  "K:mm a, z"  0:08 PM, PDT  "yyyyy.MMMMM.dd GGG hh:mm aaa"  02001.July.04 AD 12:08 PM  "EEE, d MMM yyyy HH:mm:ss Z"  Wed, 4 Jul 2001 12:08:56 -0700  "yyMMddHHmmssZ"  010704120856-0700  "yyyy-MM-dd'T'HH:mm:ss.SSSZ"  2001-07-04T12:08:56.235-0700  "yyyy-MM-dd'T'HH:mm:ss.SSSXXX"  2001-07-04T12:08:56.235-07:00  "YYYY-'W'ww-u"  2001-W27-3  after changed:1.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-dd|HH:mm:ss.SSS zzzz}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"ERROR","time":"2016-10-09|02:05:44.222 Coordinated Universal Time","log":"[http-nio-10.0.2.103-8080-exec-1][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}2.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-ddTHH:mm:ss.SSS zzzz}","log":"[%t][%c{2}.%l]:%m"}%nlog4j:ERROR Could not instantiate SimpleDateFormat with yyyy-MM-ddTHH:mm:ss.SSS zzzzjava.lang.IllegalArgumentException: Illegal pattern character 'T'3.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-dd|HH:mm:ss.SSS%z}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"ERROR","time":"2016-10-09|02:24:29.792%UTC","log":"[http-nio-10.0.2.103-8080-exec-2][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}4.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-dd|HH:mm:ss.SSSZ}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"ERROR","time":"2016-10-09|02:33:02.057+0000","log":"[http-nio-10.0.2.103-8080-exec-1][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}5.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-ddTHH:mm:ss.SSSZ}","log":"[%t][%c{2}.%l]:%m"}%nlog4j:ERROR Could not instantiate SimpleDateFormat with yyyy-MM-ddTHH:mm:ss.SSSZjava.lang.IllegalArgumentException: Illegal pattern character 'T'{"type":"log","level":"ERROR","time":"2016-10-09 02:47:12,302","log":"[http-nio-10.0.2.103-8080-exec-1][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}6.log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"ERROR","time":"2016-10-09T02:57:12.177Z","log":"[http-nio-10.0.2.103-8080-exec-1][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}final:log4j.appender.STDOUT.layout.ConversionPattern={"type":"log","level":"%p","time":"%d{yyyy-MM-dd'T'HH:mm:ss.SSSZ}","log":"[%t][%c{2}.%l]:%m"}%n{"type":"log","level":"ERROR","time":"2016-10-09T03:10:09.278+0000","log":"[http-nio-10.0.2.103-8080-exec-1][SOAP.spfesoapapi.SPFEServlet.sendRESTErrorResponse(SPFEServlet.java:537)]:Error processing request"}docker cp 943589f2581d:/utas/config/rpgwmon/log4cplus.properties  .docker cp 943589f2581d:/utas/opt/apache-tomcat-8.0.18/conf/log4j.properties  .rm -rf ${ROOT}/obj cd $ROOT/csp bsubcmd -s cspcd $ROOT/sde bsubcmd -s 
在LOG4J的配置文件中,log4j.appender.CATNAME.layout.ConversionPattern项中可配置日志输出格式.其中格式符代表的意义如下.Java代码1. %n - 换行  2. %m - 日志内容     3. %p - 日志级别(FATAL,   ERROR,   WARN,   INFO,   DEBUG   or   custom)      4. %r - 程序启动到现在的毫秒数   5. %% - percent   sign   in   output  6. %t - 当前线程名  7. %d   -  日期和时间,   8.     常用的格式有 %d{DATE}, %d{ABSOLUTE}, %d{HH:mm:ss,SSS}, %d{ddMMyyyy HH:mm:ss,SSS}。。。  9. %l - 同 %F%L%C%M  10.     %F - java源文件名  11. %L - java源码行数  12.     %C - java类名,%C{1} 输出最后一个元素  13.     %M-java方法名   %n - 换行 %m - 日志内容    %p - 日志级别(FATAL,   ERROR,   WARN,   INFO,   DEBUG   or   custom)     %r - 程序启动到现在的毫秒数  %% - percent   sign   in   output %t - 当前线程名 %d   -  日期和时间,   常用的格式有 %d{DATE}, %d{ABSOLUTE}, %d{HH:mm:ss,SSS}, %d{ddMMyyyy HH:mm:ss,SSS}。。。 %l - 同 %F%L%C%M  %F - java源文件名 %L - java源码行数  %C - java类名,%C{1} 输出最后一个元素  %M-java方法名 示例： Java代码1. [%d{HH\:mm\:ss\:SSS}][%p] (%c\:%L) - %m%n  [%d{HH\:mm\:ss\:SSS}][%p] (%c\:%L) - %m%n输出格式为：[08:58:59:412][INFO] (com.soon.action:35) - 服务器启动SSS是毫秒。log4j时间格式如下：yyyy-MM-dd   HH:mm:ss, SSS    年   月     日     时   分   秒  毫秒
